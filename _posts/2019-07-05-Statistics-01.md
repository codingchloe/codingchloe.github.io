---
layout: post
title: "기초통계학(1)- 통계적 유의성과 p-value, t-test, ANOVA, 카이제곱검정, MAB"
categories: [Statistics]
---
<hr>
```
Briefly recorded info.
```
## 통계적 유의성

통계적 유의성이란, 통계학자가 자신의 실험 결과가 우연히 일어난 것인지 아니면 우연히 일어날 수 없는 극단적인 것인지를 판단하는 방법이다. 결과가 우연히 벌어질 수 있는 변동성의 바깥에 존재한다면 우리는 이것을 통계적으로 유의하다고 말한다.

## p값(p-value)

p 값이란, 귀무가설을 구체화한 기회 모델이 주어졌을 때, 관측된 결과와 같이 특이하거나 극단적인 결과를 얻을 확률
<br>
### 통계적 유의성을 평가할 때는 두 가지 유형의 오류
* Type I Error: 우연에 의한 효과가 실제 효과라고 잘못 결론 내리는 것
* Type II Error: 실제 효과가 우연에 의한 효과라고 잘못 결론 내리는 것

## 유의 수준(알파)
랜덤 모델이 주어졌을 때, 극단적인 결과가 나올 확률은 5%이다, 1%이다 등, 귀무가설 모델에서 '비정상'이라고 판단할 임계값을 말한다.

### p 값에 대한 오해
p 값은 결과가 우연에서 비롯될 확률이라기 보단,
<u>랜덤 모델</u>이 주어졌을 때, 그 결과가 **관찰된 결과보다 더 극단적일 확률**. <br>
따라서 **p 값이 유의미하다고 해서 그것이 기대처럼 바로 '증거'가 되는 것은 아니다.**
<br>
이런 오해들로 2016년 3월 미국통계협회는 p 값의 사용에 대한 아래와 같은 원칙을 강조했다.
1. p 값은 이 데이터가 특정 통계 모델과 얼마나 상반되는지 나타낼 수 있다.
2. p 값은 연구 가설이 사실일 확률이나, 데이터가 랜덤하게 생성되었을 확률을 측정하는 것이 아니다.
3. 과학적 결론, 비즈니스나 정책 결정은 p 값이 특정 임계값을 통과하는지 여부를 기준으로 해서는 안된다.
4. 적절한 추론을 위해서는 완전한 보고와 투명성이 요구된다.
5. p 값 또는 통계적 유의성은 효과의 크기나 결과의 중요성을 의미하지 않는다.
6. p 값 그 자체는 모델이나 가설에 대한 증거를 측정하기 위한 좋은 지표가 아니다.


* 표본 크기가 더 클수록 p값이 더 작아진다.  
* 유의성 검정(가설검정)의 기본 기능은 어쩌다 우연히 일어난 일에 속지 않도록 하는 것이다. 따라서 보통은 1종오류를 최소화하도록 가설을 설계한다.

#### p 값은 어떤 결정에 관련된 정보의 일부일 뿐이다. 예를 들어 p 값은 일부 통계 또는 머신러닝 모델에서 중간 입력으로 사용되기도 한다. p 값에 따라, 어떤 피처를 모델에 포함하거나 제외하기도 한다.

### t 검정(t-test)
데이터가 횟수나 측정값을 포함하는지, 표본이 얼마나 큰지, 측정 대상이 무엇인지에 따라 다양한 유형의 유의성 검정 방법이 있다. 가장 자주 사용되는 것은 t검정(t-test)이다.

### 분산분석(ANOVA)
a/b 검정 말고, 이제 여러 그룹, a-b-c-d의 수치 데이터들을 서로 비교한 다고 가정해보자. **여러 그룹 간**의 통계적으로 유의미한 차이를 검정하는 통계적 절차를 분산분석(analysis of variance)줄여서 **ANOVA**라고 한다.

* F 통계량: 그룹 평균 간의 차이가 랜덤 모델에서 예상되는 것보다 벗어나는 정도를 측정하는 표준화된 통계량
* SS: 어떤 평균으로부터의 편차들의 제곱합
* 두 그룹의 평균을 비교하기 위해 순열검정 대신 t 검정을 사용할 수 있는 것처럼, F 통계량을 기반으로 한 ANOVA 통계 검정
* F 통계량은 잔차 오차(residual error)로 인한 분산과 그룹 평균(처리 효과)의 분산에 대한 비율을 기초로 한다. 이 비율이 높을수록 통계적으로 유의미하다.

### 카이제곱검정(chi-square statistic)
웹 테스트 시, 종종 단순한 a/b 검정을 넘어 동시에 여러 가지 처리를 한 번에 테스트할 필요가 있다. 카이제곱검정은 횟수 관련 데이터에 주로 사용되며 예상되는 분포에 얼마나 잘 맞는지를 검정한다. 일반적으로 변수 간 독립성에 대한 귀무가설이 타당한지를 평가하기 위해 사용한다.
카이제곱통계량(chi-square statistic): 기댓값으로부터 어떤 관찰값까지의 거리를 나타내는 측정치, 피어슨 잔차들의 제곱 합

### 피셔의 정확검정
사건 발생 횟수가 낮을 때, 카이제곱겁정 대신 활용

### 카이제곱검정 & 피셔의 정확검정
* Data science에서는 주로 필터 역할<br>
* 즉, 어떤 효과나 특징에 대해 기본적인 유의성 검정을 넘어 더 심층적인 분석이 필요할지 여부를 결정<br>
* 머신러닝에서는 자동으로 특징을 선택하기 위해 사용한다. 특징에 따라 클래스의 분포가 어떠한지 조사하고, 특정 클래스의 분포가 랜덤 변이에 비해 비정상적으로 크거나 작은 특징을 알아내는 등에 사용한다.

### 멀티 암드 밴딧 알고리즘(MAB)
- A/B 테스트의 진화 버전
- MAB는 아래의 문제점을 해결하는 방법으로 실험 도중에 얻은 정보를 통합하고, 수익이 낮은 것의 빈도를 줄이는 쪽으로 표본 추출 과정을 변경한다.
#### A/B 테스트 하는 과정 중 문제점
  - 테스트를 하는 데 시간과 비용이 많이 든다.
  - A/B 테스트 중 안 좋은 대안으로 인한 손해 발생
  - 테스트 당시에는 A안이 좋았는데 다음 주가 되니 B의 반응률이 더 좋다
<br>  
